{% extends 'base.html' %}

{% block content %}
<div class="min-h-[80vh] flex items-center justify-center bg-slate-50 px-4">
    <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md border border-slate-100 animate-fade-in-up">
        <h2 class="text-3xl font-bold text-center text-slate-800 mb-2">Crear Cuenta</h2>
        <p class="text-center text-slate-500 mb-8">Únete a Renta Ya y encuentra tu hogar</p>

        <button onclick="loginWithGoogle()" class="w-full py-3.5 rounded-xl font-bold transition transform hover:scale-[1.01] shadow-md border border-slate-200 bg-white text-slate-700 hover:bg-slate-50 flex items-center justify-center mb-6">
            <i class="fab fa-google text-lg mr-3"></i> 
            Continuar con Google
        </button>

        <div class="relative flex justify-center items-center mb-6">
            <div class="absolute inset-0 flex items-center">
                <div class="w-full border-t border-slate-200"></div>
            </div>
            <div class="relative z-10 bg-white px-4 text-sm text-slate-500">
                O regístrate con correo
            </div>
        </div>
        
        <form onsubmit="handleRegister(event)" class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Nombre Completo</label>
                <input type="text" id="fullname" required class="w-full p-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Correo Electrónico</label>
                <input type="email" id="email" required class="w-full p-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Contraseña</label>
                <input type="password" id="password" required class="w-full p-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            <button type="submit" class="w-full btn-brand py-3 rounded-xl font-bold shadow-lg">
                Registrarse
            </button>
        </form>

        <p class="text-center mt-8 text-sm text-slate-600">
            ¿Ya tienes cuenta? <a href="/login" class="text-blue-600 font-bold hover:underline">Inicia Sesión</a>
        </p>
    </div>
</div>

<script>
    // Usa la función registerWithEmail definida en main.js
    async function handleRegister(e) {
        e.preventDefault();
        const name = document.getElementById('fullname').value;
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const btn = e.target.querySelector('button[type="submit"]');

        try {
            btn.innerText = "Creando cuenta...";
            btn.disabled = true;
            await registerWithEmail(email, password, name); 
        } catch (error) {
            alert("Error: " + error.message);
            btn.innerText = "Registrarse";
            btn.disabled = false;
        }
    }
</script>
{% endblock %}